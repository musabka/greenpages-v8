مرحبًا يا صديقي، سنقوم معًا بإعادة هيكلة لوحات التحكم، لن نقومب لإعادة هيكلة منفصلة، بل متكاملة، سنحذف أية زوائد لا داعي لها، سنكمل أية نواقص، والأهم: سنتأكد أن كل عنصر يستخدم في لوحة التحكم لديه api خاص به بشكل كامل، سنركز على تجربة المستخدم ومسار العمل بحيث يكون كاملًا متكاملًا. 

سنبدأ بلوحة تحكم المستخدم العادي

أنا أقترح التالي: 

لوحة تحكم المستخدم العادي (User Dashboard)
مبادئ التصميم

صفحة واحدة واضحة + صفحات تفاصيل عند الحاجة (بدون تشعب).

المحاسبة SSOT: أي “رصيد” أو “مدفوعات” تظهر للمستخدم يجب أن تكون مرتبطة بسجلات محاسبية/فواتير (وليس مجرد أرقام معزولة).

تجربة موحّدة Web/Flutter: نفس الأقسام ونفس أسماء الحالات ونفس المنطق.

1) إذا لم يكن لدى المستخدم نشاط تجاري مرتبط
1.1 الصفحة الرئيسية (Overview)

هدفها: إعطاء المستخدم كل ما يحتاجه خلال 20 ثانية.

مكوّنات:

شريط ترحيب مختصر

الاسم

المحافظة / المدينة / الحي (مع زر “تعديل بياناتي”)

بطاقة المحفظة

الرصيد الحالي

زر: شحن المحفظة

زر: سجل العمليات (Transactions)

بطاقة “إعلانات/عروض حسب منطقتك” (اختيارية لكن مفيدة)

مبنية على governorate/city/district التي يجبرها التسجيل

تعرض: عروض/باقات/خصومات “قريبة” أو “مناسبة”


1.2 المحفظة (Wallet)

صفحة عملية جدًا:

الرصيد

زر شحن

قائمة آخر العمليات (آخر 20)

النوع: شحن / دفع / استرداد

الحالة: Pending / Completed / Failed

التاريخ والمبلغ

رابط “تفاصيل العملية”

تفاصيل العملية (Transaction Details)

رقم العملية

المبلغ/العملة

سبب العملية (وصف)

المرجع: (PaymentId / TopUpId / InvoiceId إن وجد)

إن كان مرتبطًا بفاتورة: زر “عرض الفاتورة”

1.3 الفواتير والمدفوعات (Invoices & Payments)

حتى لو لم يكن لديه نشاط، قد تكون لديه فواتير اشتراك/إعلانات/خدمات.

المحتوى:

قائمة فواتير مع فلترة:

DRAFT / ISSUED / PARTIAL / PAID / CANCELLED

لكل فاتورة:

رقم الفاتورة

البند (اشتراك/إعلان…)

الإجمالي + الضريبة

الحالة

زر “دفع الآن” (من المحفظة أو بوابة دفع)

صفحة فاتورة

تفاصيل البنود

الضريبة

المدفوع

المتبقي

سجل الدفعات (Payment entries)


1.4 ملفي الشخصي (Profile)

الاسم

الهاتف/البريد

المحافظة/المدينة/الحي (مهم لحملات الاستهداف)

إعدادات الإشعارات

تغيير كلمة المرور


1.5 الدعم والمساعدة (Support)

فتح تذكرة/رسالة

الأسئلة الشائعة

سياسات مختصرة (خصوصية/شروط)

2) إذا كان لدى المستخدم نشاط تجاري مرتبط (Owner Dashboard)
2.1 الصفحة الرئيسية (Owner Overview)

هدفها: “تشغيل النشاط” بسرعة بدون ازدحام.

مكوّنات:

بطاقة النشاط

اسم النشاط

الحالة: Active / Pending / Suspended

الباقة الحالية + تاريخ الانتهاء

زر: تجديد/ترقية الباقة


بطاقة المدفوعات

رصيد المحفظة

فواتير مستحقة (عدد + مجموع)

زر “دفع الفواتير”

بطاقة الأداء المختصرة

عدد الزيارات/المشاهدات (إن كان موجود Tracking)

عدد المكالمات/النقرات (إن كان موجود)

تقييم النشاط (متوسط النجوم + عدد المراجعات)

تنبيهات مهمة

“اشتراكك سينتهي خلال X أيام”

“لديك مراجعات تحتاج رد”

“فاتورة غير مدفوعة”

2.2 إدارة النشاط التجاري (Business Management) أو الأنشطة التجارية باعتبار يمكن للمستخدم ان يملك عدة أنشطة تجارية

صفحة واحدة “مجمّعة” مع تبويبات بسيطة:

(A) البيانات الأساسية

الاسم + التصنيف + العنوان

الموقع الجغرافي

ساعات العمل

وسائل التواصل

صور النشاط

(B) الباقات والاشتراكات

الباقة الحالية

تاريخ البداية/الانتهاء

سجل الباقات السابقة

زر: “شراء/تجديد”

عرض الضرائب بوضوح قبل الدفع
المستخدم يستطيع العرض لا يستطيع التعديل

(C) الإعلانات

سيتم تطويره لاحقا

2.3 المراجعات (Reviews)

هدفها: إدارة السمعة بشكل عملي.

صفحة “المراجعات الواردة للنشاط”

فلتر: نجوم / تاريخ / تم الرد/لم يتم الرد

كل مراجعة كـ Card:

اسم المستخدم (أو مجهول حسب السياسة)

التقييم

النص

زر: “رد”

زر: “إبلاغ/طلب إزالة” 

صفحة “مراجعاتي أنا”

المراجعات التي كتبها المستخدم على أنشطة أخرى

إمكانية تعديل/حذف

2.4 المالية (Billing Center)

هذه واجهة “مبسطة للمستخدم” وليست لوحة محاسب.

المحتوى:

فواتير 
سجل دفعات

إشعارات إن وُجدت

محفظة المستخدم كوسيلة دفع أساسية

وسائل الدفع المتاحة


ملاحظة مهمة: لا تعرض “قيود محاسبية” للمستخدم العادي. اعرض فواتير + دفعات + أسباب، لأن SSOT موجود بالـ API لكن UX يجب أن يبقى بسيط.

2.5 ربط المالك وإدارة الصلاحيات داخل النشاط (Owner Linking)

حتى لو الربط موجود عبر المندوب، يجب أن يظهر للمستخدم بوضوح:

داخل صفحة النشاط:

“أنت المالك: نعم/لا”

“حالة الربط: Pending/Approved/Rejected”


3) عناصر مشتركة (للـ Web وFlutter)
3.1 شريط جانبي بسيط (Navigation)
بدون نشاط:

الرئيسية

المحفظة

الفواتير

ملفي

الدعم

مع نشاط:

الرئيسية

نشاطي

المراجعات

الفواتير والمدفوعات

المحفظة

ملفي

الدعم

3.2 حالات واضحة (Statuses)

Wallet Tx: PENDING / COMPLETED / FAILED

Invoice: DRAFT / ISSUED / PARTIAL / PAID / CANCELLED

Business Link: PENDING / APPROVED / REJECTED

Subscription: ACTIVE / EXPIRED / SUSPENDED

3.3 استخدام بيانات المحافظة/المدينة/الحي داخل اللوحة

استخدام عملي (بدون حشو):

“عروض مخصصة لمنطقتك”

“إعلانات محلية”

“اقتراحات تحسين ظهور نشاطك داخل محافظتك”

فلترة بعض التقارير البسيطة (مثل تفاعل نشاطك داخل نفس المنطقة إن كان موجود)


----

الآن قم بالعمل على جعل لوحة تحكم المستخدم بهذا الشكل، 
واعمل كالتالي: 

1- حدد ميزات وعناصر لوحة تحكم المستخدم
2- تفقد قاعدة البيانات
3- تأكد من توافق قاعدة البيانات و api and endpoint مع عناصر لوحة التحكم جميعها
إن وجدت أي اختلافات أو نواقص أكملها أولًا
4- قم ببناء لوحة التحكم
5- تأكد من توافق عناصر لوحة التحكم مع جميع الموديولات في النظام
6- احذف أية ملفات قديمة أو غير مستخدمة
7- وثق كل الميزات بالتفصيل في ملف واحد فقط هو apps\pre-production-plan\لوحة_تحكم_المستخدم\user-dashbaord.md
