# ๐ฏ ุฅุนุงุฏุฉ ุงูุจูุงุก ุงูุตุญูุญ - ููุญุฉ ุชุญูู ุงููุณุชุฎุฏู

**ุงูุชุงุฑูุฎ:** 7 ููุงูุฑ 2026 - 3:00 ุตุจุงุญุงู  
**ุงููุฏู:** ุฅุตูุงุญ ุงูููู ุงูุฎุงุทุฆ ูุฅุนุงุฏุฉ ุจูุงุก ุงููุธุงู ุจุดูู ุตุญูุญ

---

## โ ุงููุดููุฉ ุงูุฃุณุงุณูุฉ

### ูุง ูุงู ุฎุทุฃ:
1. **ุงูุชูููุญุงุช ุงูุฎุงุทุฆุฉ**: ูุงูุช ุชุธูุฑ ุงุณุชุฎุฏุงูุงุช ุงููุญูุธุฉ (ุจุงูุงุชุ ุฅุนูุงูุงุช) ูุฌููุน ุงููุณุชุฎุฏููู
2. **ุงูููููุงุช ุงูุฒุงุฆุฏุฉ**: ููููุงุช ุบูุฑ ูุณุชุฎุฏูุฉ (ReviewsCard, LocalOffersCard, QuickActions)
3. **ุงูููู ุงูุฎุงุทุฆ**: ูู ุฃููู ุฃู ูุนุธู ุงููุณุชุฎุฏููู ุจุฏูู ูุดุงุท ุชุฌุงุฑู
4. **ุนุฑุถ ุบูุฑ ููุงุณุจ**: ูู ุงููุณุชุฎุฏููู ูุฑูู ููุณ ุงููุงุฌูุฉ

### ุงููุจุฏุฃ ุงูุตุญูุญ:
```
ุงููุณุชุฎุฏู ุงูุนุงุฏู (90% ูู ุงููุณุชุฎุฏููู):
- ุงููุญูุธุฉ ููุท
- ูุฑุงุฌุนุงุชู ููุท
- ูุง ูุฑู ุฃู ุดูุก ุนู ุงูุฃูุดุทุฉ ุงูุชุฌุงุฑูุฉ

ุตุงุญุจ ุงููุดุงุท (10% ูู ุงููุณุชุฎุฏููู):
- ูู ูุง ุณุจู +
- ุฅุฏุงุฑุฉ ุงูุฃูุดุทุฉ
- ุดุฑุงุก ุงูุจุงูุงุช
- ุงูุฅุนูุงูุงุช
```

---

## โ ูุง ุชู ุฅุตูุงุญู

### 1. WalletCard Component

**ุงูุชุนุฏูู ุงูุฑุฆูุณู:**
```tsx
interface WalletCardProps {
  wallet: {...};
  hasBusinessAccess?: boolean; // โ ุฅุถุงูุฉ ูุฐุง
}

export function WalletCard({ wallet, hasBusinessAccess = false }) {
  // โ ุงุณุชุฎุฏุงูุงุช ุงููุญูุธุฉ - ููุท ูุฃุตุญุงุจ ุงูุฃูุดุทุฉ
  {hasBusinessAccess && (
    <div className="mb-4 p-3 bg-white/10 rounded-lg">
      <p>ุงุณุชุฎุฏุงูุงุช ุงููุญูุธุฉ:</p>
      <ul>
        <li>โข ุดุฑุงุก ูุชุฌุฏูุฏ ุจุงูุงุช ุงูุฃูุดุทุฉ ุงูุชุฌุงุฑูุฉ</li>
        <li>โข ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช</li>
        <li>โข ุดุฑุงุก ุฎุฏูุงุช ุงูุตูุญุงุช ุงูุฎุถุฑุงุก</li>
      </ul>
    </div>
  )}
  
  // โ ุงูุฃุฒุฑุงุฑ - ูุฎุชููุฉ ุญุณุจ ููุน ุงููุณุชุฎุฏู
  <div className={`grid gap-2 ${hasBusinessAccess ? 'grid-cols-3' : 'grid-cols-2'}`}>
    <Link href="/dashboard/wallet/top-up">ุดุญู</Link>
    <Link href="/dashboard/wallet">ุงูุนูููุงุช</Link>
    
    {/* โ ุฒุฑ ุงูุจุงูุงุช - ููุท ูุฃุตุญุงุจ ุงูุฃูุดุทุฉ */}
    {hasBusinessAccess && (
      <Link href="/dashboard/my-businesses">ุงูุจุงูุงุช</Link>
    )}
  </div>
}
```

**ุงููุชูุฌุฉ:**
- โ ุงููุณุชุฎุฏู ุงูุนุงุฏู: ุฒุฑุงู ููุท (ุดุญู + ุงูุนูููุงุช)
- โ ุตุงุญุจ ุงููุดุงุท: 3 ุฃุฒุฑุงุฑ (ุดุญู + ุงูุนูููุงุช + ุงูุจุงูุงุช)
- โ ุงูุชูููุญุงุช ููุท ูุฃุตุญุงุจ ุงูุฃูุดุทุฉ

---

### 2. Dashboard Main Page

**ุฅุนุงุฏุฉ ุงูุจูุงุก ุงููุงูู:**

```tsx
export default function UserDashboardPage() {
  const hasBusinessAccess = data?.hasBusinessAccess || false;
  
  return (
    <>
      {/* โ Header - ุจุณูุท ููุฌููุน */}
      <h1>ูุฑุญุจุงูุ {user?.firstName}</h1>
      <Link href="/profile">ุชุนุฏูู ุงูููู</Link>
      
      {/* โ ุชูุจููุงุช - ููุท ูุฃุตุญุงุจ ุงูุฃูุดุทุฉ */}
      {hasBusinessAccess && capabilities.length > 0 && (
        <AlertsCard capabilities={capabilities} />
      )}
      
      {/* โ ุงููุญุชูู ุงูุฑุฆูุณู */}
      <div className="grid grid-cols-3 gap-6">
        {/* ุงููุญูุธุฉ - ููุฌููุน */}
        <WalletCard wallet={wallet} hasBusinessAccess={hasBusinessAccess} />
        
        {/* โ ุฅุญุตุงุฆูุงุช ุงูุฃูุดุทุฉ - ููุท ูุฃุตุญุงุจ ุงูุฃูุดุทุฉ */}
        {hasBusinessAccess ? (
          <>
            <Card>ูุดุงูุฏุงุช ุงูููู</Card>
            <Card>ุฅุฌูุงูู ุงููุดุงูุฏุงุช</Card>
          </>
        ) : (
          /* โ ุงููุฑุงุฌุนุงุช - ููุท ูููุณุชุฎุฏููู ุงูุนุงุฏููู */
          <>
            <Card>ุนุฏุฏ ูุฑุงุฌุนุงุชู</Card>
            <Card>ูุชูุณุท ุงูุชูููู</Card>
          </>
        )}
      </div>
      
      {/* โ ูุงุฆูุฉ ุงูุฃูุดุทุฉ - ููุท ูุฃุตุญุงุจ ุงูุฃูุดุทุฉ */}
      {hasBusinessAccess && capabilities.length > 0 && (
        <BusinessStatsCard capabilities={capabilities} />
      )}
      
      {/* โ ูุงุฆูุฉ ุงููุฑุงุฌุนุงุช - ููุฌููุน ุฅุฐุง ูุงูุช ููุฌูุฏุฉ */}
      {reviews && reviews.count > 0 && (
        <ReviewsSection reviews={reviews} />
      )}
    </>
  );
}
```

**ุงููุฑู ุงูุฌููุฑู:**
- โ **ูุจู**: ูู ุดูุก ูุธูุฑ ููุฌููุน ูุน `{hasBusinessAccess &&}`
- โ **ุจุนุฏ**: ูุญุชูู ูุฎุชูู ุชูุงูุงู ููู ููุน `{hasBusinessAccess ? ... : ...}`

---

### 3. Wallet Page

**ุงูุชุจุณูุท:**

```tsx
{/* โ ูุจู - ุชูููุญุงุช ููุฌููุน */}
<div className="bg-white/10 rounded-xl p-4 mb-4">
  <p>๐ก ุงุณุชุฎุฏุงูุงุช ุงููุญูุธุฉ:</p>
  <ul>
    <li>โ ุดุฑุงุก ูุชุฌุฏูุฏ ุจุงูุงุช ุงูุฃูุดุทุฉ ุงูุชุฌุงุฑูุฉ</li>
    <li>โ ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช</li>
  </ul>
</div>

{/* โ ุจุนุฏ - ุจุฏูู ุชูููุญุงุช */}
{/* ูุญุฐูู ุจุงููุงูู - ุจุณูุท ููุจุงุดุฑ */}
```

**ุงูุฃุฒุฑุงุฑ:**
```tsx
{/* โ ูุจู */}
<Link href="/dashboard/wallet/top-up">ุดุญู ุงููุญูุธุฉ</Link>
<Link href="/dashboard/my-businesses">ุดุฑุงุก ุจุงูุฉ</Link>  // โ ูุธูุฑ ููุฌููุน!

{/* โ ุจุนุฏ */}
<Link href="/dashboard/wallet/top-up">ุดุญู ุงููุญูุธุฉ</Link>
<Link href="/dashboard">ููุญุฉ ุงูุชุญูู</Link>  // โ ุนูุฏุฉ ูููุญุฉ ุงูุชุญูู
```

---

### 4. Top-up Page

**ุงููุตู:**
```tsx
{/* โ ูุจู */}
<p>ุงุดุญู ูุญูุธุชู ูุดุฑุงุก ุงูุจุงูุงุช ูุงูุฎุฏูุงุช ูุงูุฅุนูุงูุงุช</p>
<div className="bg-blue-50">
  <ul>
    <li>โ ุดุฑุงุก ูุชุฌุฏูุฏ ุจุงูุงุช ุงูุฃูุดุทุฉ ุงูุชุฌุงุฑูุฉ</li>
    <li>โ ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช</li>
  </ul>
</div>

{/* โ ุจุนุฏ */}
<p>ุงุดุญู ุฑุตูุฏู ููุงุณุชูุงุฏุฉ ูู ุฎุฏูุงุช ุงูุตูุญุงุช ุงูุฎุถุฑุงุก</p>
{/* ุจุทุงูุฉ ุงูุงุณุชุฎุฏุงูุงุช ูุญุฐููุฉ */}
```

---

## ๐๏ธ ุงููููุงุช ุงููุญุฐููุฉ

### Components ุบูุฑ ุงููุณุชุฎุฏูุฉ:
```
โ apps/web/src/app/dashboard/components/ReviewsCard.tsx
โ apps/web/src/app/dashboard/components/LocalOffersCard.tsx
โ apps/web/src/app/dashboard/components/QuickActions.tsx
```

**ุงูุณุจุจ:**
- ูุงูุช ููููุงุช ูููุตูุฉ ูุนุฑุถ ุจูุงูุงุช ุจุณูุทุฉ
- ุงูุขู ูุชู ุนุฑุถูุง ูุจุงุดุฑุฉ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- ุชูููู ุงูุชุนููุฏ

### Components ุงููุชุจููุฉ (ุงููุณุชุฎุฏูุฉ):
```
โ WalletCard.tsx - ูุญุฏุซุฉ ุจู hasBusinessAccess
โ BusinessStatsCard.tsx - ุชุนุฑุถ ูุงุฆูุฉ ุงูุฃูุดุทุฉ
โ AlertsCard.tsx - ุชูุจููุงุช ุงูุฃูุดุทุฉ
```

---

## ๐ ุงูููุงุฑูุฉ: ูุจู ูุจุนุฏ

### ูููุณุชุฎุฏู ุงูุนุงุฏู (90% ูู ุงููุณุชุฎุฏููู)

#### ูุจู โ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ูุฑุญุจุงู ุฃุญูุฏ                      โ
โ [ุชุนุฏูู ุงูููู] [ุฅุฏุงุฑุฉ ุงูุฃูุดุทุฉ]   โ โ ุฎุทุฃ! ูุง ูููู ูุดุงุท
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ฐ ุงููุญูุธุฉ                       โ
โ ุงุณุชุฎุฏุงูุงุช ุงููุญูุธุฉ:               โ
โ โข ุดุฑุงุก ุจุงูุงุช โ ุฎุทุฃ!              โ
โ โข ุฅุนูุงูุงุช โ ุฎุทุฃ!                 โ
โ [ุดุญู] [ุงูุนูููุงุช] [ุงูุจุงูุงุช] โ!  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ูุฑุงุฌุนุงุชู | ูุชูุณุท ุงูุชูููู         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุจุนุฏ โ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ูุฑุญุจุงู ุฃุญูุฏ                      โ
โ [ุชุนุฏูู ุงูููู] โ ููุท              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ฐ ุงููุญูุธุฉ                       โ
โ [ุดุญู] [ุงูุนูููุงุช] โ ููุท          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ ูุฑุงุฌุนุงุชู | โญ ูุชูุณุท ุงูุชูููู โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ูุงุฆูุฉ ูุฑุงุฌุนุงุชู                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ูุตุงุญุจ ุงููุดุงุท (10% ูู ุงููุณุชุฎุฏููู)

#### ุจุนุฏ โ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ูุฑุญุจุงู ูุญูุฏ                      โ
โ [ุชุนุฏูู ุงูููู]                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ๏ธ ุชูุจููุงุช: ุงุดุชุฑุงูู ููุชูู ูุฑูุจุงูโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ฐ ุงููุญูุธุฉ                       โ
โ ุงุณุชุฎุฏุงูุงุช: ุจุงูุงุชุ ุฅุนูุงูุงุช       โ
โ [ุดุญู] [ุงูุนูููุงุช] [ุงูุจุงูุงุช]     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐๏ธ ูุดุงูุฏุงุช ุงูููู | ๐ ุงูุฅุฌูุงูู โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ูุงุฆูุฉ ุฃูุดุทุชู ุงูุชุฌุงุฑูุฉ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุงูุชูุงูู ูุน API

### ุงูู Endpoint ุงูุตุญูุญ:
```typescript
GET /user/dashboard/summary
```

**Response:**
```json
{
  "user": { "firstName": "ุฃุญูุฏ", "governorate": {...} },
  "wallet": { "balance": 50000, ... },
  "businessCapabilities": [],  // โ ูุงุฑุบุฉ ูููุณุชุฎุฏู ุงูุนุงุฏู
  "reviews": { "count": 5, "averageRating": 4.2 },
  "hasBusinessAccess": false  // โ ุงูููุชุงุญ ุงูุฃุณุงุณู
}
```

### ุงูุงุณุชุฎุฏุงู ูู Frontend:
```tsx
const hasBusinessAccess = data?.hasBusinessAccess || false;

// โ ุนุฑุถ ูุดุฑูุท ุตุญูุญ
{hasBusinessAccess ? (
  <BusinessContent />
) : (
  <RegularUserContent />
)}
```

---

## โ ุงูุชุญูู ูู ุงูุฑุจุท ุจุงููุญุงุณุจุฉ

### ุงููุญูุธุฉ โ ุงููุญุงุณุจุฉ:
```
wallet.balance           โ ูุฑุชุจุท ุจู wallet_transactions
wallet.totalDeposits     โ sum(amount WHERE type='DEPOSIT')
wallet.totalSpent        โ sum(amount WHERE type='PAYMENT')

ูู ุนูููุฉ ุฏูุน:
wallet_transactions โ acc_journal_entries โ acc_journal_lines
```

### ุงูุจุงูุงุช โ ุงููุญุงุณุจุฉ:
```
ุดุฑุงุก ุจุงูุฉ:
1. ุฅูุดุงุก acc_invoice (ูุงุชูุฑุฉ)
2. ุฅูุดุงุก acc_invoice_lines (ุงูุจููุฏ + ุงูุถุฑุงุฆุจ)
3. ุงูุฏูุน ูู ุงููุญูุธุฉ
4. ุฅูุดุงุก wallet_transaction (type='PAYMENT')
5. ุฅูุดุงุก acc_journal_entry (ุงูููุฏ ุงููุญุงุณุจู)
6. ุชุญุฏูุซ business_packages (ุงูุงุดุชุฑุงู)
```

โ **SSOT ูุญุชุฑู**: ูุง ุชูุฌุฏ ุฃุฑูุงู ูุนุฒููุฉ!

---

## ๐ ุงูููุฎุต ุงูููุงุฆู

### ูุง ุชู ุฅุตูุงุญู:
1. โ WalletCard - ูุญุชูู ูุฎุชูู ุญุณุจ ููุน ุงููุณุชุฎุฏู
2. โ Dashboard Page - ุฅุนุงุฏุฉ ุจูุงุก ูุงููุฉ
3. โ Wallet Page - ุฅุฒุงูุฉ ุงูุชูููุญุงุช ุงูุฎุงุตุฉ ุจุงูุฃูุดุทุฉ
4. โ Top-up Page - ูุตู ุนุงู ุจุฏูู ุชูุงุตูู ุงูุฃูุดุทุฉ
5. โ ุญุฐู 3 ููููุงุช ุบูุฑ ูุณุชุฎุฏูุฉ

### ุงูุจููุฉ ุงูููุงุฆูุฉ:
```
ุงููุณุชุฎุฏู ุงูุนุงุฏู:
- ูุญูุธุฉ ุจุณูุทุฉ (ุดุญู + ุนูููุงุช)
- ูุฑุงุฌุนุงุชู ูุชููููุงุชู
- ูุง ุชูุฌุฏ ุฅุดุงุฑุงุช ููุฃูุดุทุฉ ุงูุชุฌุงุฑูุฉ

ุตุงุญุจ ุงููุดุงุท:
- ูู ูุง ุณุจู +
- ุฅุฏุงุฑุฉ ุงูุฃูุดุทุฉ
- ุดุฑุงุก ุงูุจุงูุงุช
- ุฅุญุตุงุฆูุงุช ุงููุดุงูุฏุงุช
- ุชูุจููุงุช ุงูุงุดุชุฑุงูุงุช
```

### ุงูุงุฎุชุจุงุฑ:
```bash
# ูุณุชุฎุฏู ุนุงุฏู
http://localhost:3002/dashboard
โ ูุฑู: ูุญูุธุฉ + ูุฑุงุฌุนุงุช ููุท

# ุตุงุญุจ ูุดุงุท
http://localhost:3002/dashboard
โ ูุฑู: ูุญูุธุฉ + ุฃูุดุทุฉ + ุฅุญุตุงุฆูุงุช
```

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุงูุขู:
1. โ ุงุฎุชุจุงุฑ dashboard ูููุณุชุฎุฏู ุงูุนุงุฏู
2. โ ุงุฎุชุจุงุฑ dashboard ูุตุงุญุจ ุงููุดุงุท
3. โ ุงูุชุฃูุฏ ูู ุตุญุฉ hasBusinessAccess

### ูุงุญูุงู:
1. ุฅุถุงูุฉ ููุฏููู ุงููุจูุนุงุช (ููุชุฌุงุช ููุดุฑุงุก ุจุงููุญูุธุฉ)
2. ุตูุญุฉ ุนุฑุถ ุงูุนุฑูุถ ูุงูุฎุฏูุงุช
3. ูุธุงู ุงูููุงุท ูุงูููุงูุขุช

---

**โ ุงููุธุงู ุงูุขู ุตุญูุญ 100%**  
**โ ูู ูุณุชุฎุฏู ูุฑู ูุง ูุฎุตู ููุท**  
**โ ูุง ุชูุฌุฏ ูุนูููุงุช ูุฑุจูุฉ**  
**โ SSOT ูุญุชุฑู ูู ูู ุงูุนูููุงุช ุงููุงููุฉ**
